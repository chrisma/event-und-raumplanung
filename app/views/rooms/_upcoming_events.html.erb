<% @calevents = Event.all %>

<div id="calendar"></div>

<script>
  $(document).ready(function(){
    $("#calendar").fullCalendar({
      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
      },
      events: [
                <% @calevents.each do |each| %>
                  <% if each.room_ids.include?(@room.id) %>
                    {
                      title: '<%= each.name %>',
                      start: '<%= each.starts_at %>'

                                <% if each.is_approved %>
                                    , color: 'green'
                                <% else %>
                                  , color: 'red'
                                <% end %> 
                    
                    },
                  <% end %>
                <% end %>
      ],
      theme: false
    });
  });
</script>