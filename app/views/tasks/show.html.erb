<%- model_class = Task -%>
<div class="task-page-header">
  <div class="row task-section-divider">
    <div class="col-xs-12 col-md-8">
      <h1>
        <%=t '.title', :default => model_class.model_name.human.titleize %>:
        <%= @task.name %>
      </h1>
    </div>
    <div class="col-xs-6 col-md-4" style="text-align: right">
      <h2><%= @task.deadline.strftime("%d.%m.%Y") %></h2>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 col-md-8">
      <h3><%= @event.name %> (<%= @event.starts_at.strftime("%d.%m.%Y") %>)</h3>
    </div>
    <div class="col-xs-6 col-md-4" style="text-align: right">
      <h3><%= @task.identity.name %></h3>
    </div>
  </div>
</div>



<div class="row task-section-divider task-section">
  <div class="col-xs-16 col-md-10 task-description">
    <%= raw nl2br h @task.description %>
  </div>
  <div class="col-xs-2 col-md-2 task-done-indicator">
    <% if @task.done %>
      <span class="glyphicon glyphicon-ok task-glyphicon-done"></span>
      <br><span class="task-done"><%= t('tasks.show.done') %></span> 
    <% else %>
      <span class="glyphicon glyphicon-unchecked task-glyphicon-undone"></span>
      <br><span class="task-undone"><%= t('tasks.show.not_done') %></span>  
    <% end %>
  </div>
</div>


<% if @task.uploads.count() > 0 %>
  <div class="row task-middle-section">
    <h3><%= t('tasks.show.files') %></h3>
    <ul class="task-attachment">
      <% @task.uploads.each do |upload| %>
      <li><span class="glyphicon glyphicon-file task-glyphicon-file"></span><%= link_to upload.file_file_name, public_url(upload.id, upload.file_file_name) %></li>
    <% end %>  
    </ul>
  </div>
<% end %>

<% if @task.attachments.count() > 0 %>
  <div class="row task-middle-section">
    <h3><%= t('tasks.show.links') %></h3>
    <ul>
      <% @task.attachments.each do |attachment| %>
        <li><%= link_to attachment.title, attachment.url %></li>
      <% end %>
    </ul>
  </div>
<% end %>



<div class="row task-lower-section">
  <div class="col-xs-4 col-md-3">
    <%= link_to t('.back', :default => t("helpers.links.back")), event_path(@task.event_id), :class => 'btn btn-default'  %>
  </div>
  <div class="col-xs-14 col-md-9 text-right">
    <% if can? :edit, @task %>
      <%= link_to t('.edit', :default => t("helpers.links.edit")),
                    edit_task_path(@task), :class => 'btn btn-default' %>
    <% end %>
    <% if can? :destroy, @task %>
      <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                    task_path(@task),
                    :method => 'delete',
                    :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                    :class => 'btn btn-danger' %>
    <% end %>
  </div>
</div>