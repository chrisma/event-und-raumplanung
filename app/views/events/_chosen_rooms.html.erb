<% if @chosen_rooms %>
  <div class="row">
      <%= label_tag "Requestable Equipment: ", nil, :class => 'control-label' %>
  </div>

  <%for room in @chosen_rooms%>
    <div class="row">
      <%= label_tag room.name, nil, :class => 'control-label' %>
    </div>
    <% table_id = "room_details"+room.id.to_s %>
    <div class="form-group">
      <a class="btn btn-default" data-toggle="collapse" href= <%= '#'+table_id %> >
        <span class="drop-down-chevron glyphicon glyphicon-chevron-right"></span> 
        Details
      </a>
    </div>
    <div id = <%= table_id %> class="collapse">
      <div class="row">
        <%= label_tag "Capacity: ", nil, :class => 'control-label' %>
        <%= label_tag room.size, nil, :class => 'control-label' %>
      </div>
      <div class="control-group">
          <table class="table table-column">
              <thead>
                <tr>
                  <th>Category</th>
                  <th>Request</th>
                  <th>Present</th>
                </tr>
              </thead>
              <tbody>
                <% @available_equipment.each do |category, count| %>
                  <tr>
                    <td><%= category%></td>
                    <% requested_count = 0 %>
                    <% if @requested_equipment && @requested_equipment.has_key?(room.id) && @requested_equipment[room.id].has_key?(category) %>
                      <% requested_count = @requested_equipment[room.id][category] %>
                    <% end %>                   
                    <td> <%= number_field_tag category+'_equipment_count_'+room.id.to_s, 
                          requested_count, min: 0 %></td>
                    <% if @room_equipment[room.id].has_key?(category) %>
                      <td><%= count %></td>
                    <% else %>    
                      <td>0</td>
                    <% end %> 
                  </tr>
                <% end %>   
              </tbody>
        </table>
      </div>
    </div>
    <br>  
  <% end %>
<% end %>
