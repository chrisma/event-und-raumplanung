<%- model_class = EventOccurrence -%>

<div class="page-header">
    <h1><%=t 'event_occurrences.show.title', :default => model_class.model_name.human.titleize %></h1>
</div>

<dl class="dl-horizontal">
    <dt><strong><%= t('event_occurrences.show.starts_occurring_at') %>:</strong></dt>
    <dd><%= @event.starts_occurring_at.strftime("%d.%m.%Y - %H:%M") %></dd>
    <dt><strong><%= t('event_occurrences.show.ends_occurring_at') %>:</strong></dt>
    <dd><%= @event.ends_occurring_at.strftime("%d.%m.%Y - %H:%M") %></dd>
    <dt><strong><%= model_class.human_attribute_name(:id) %>:</strong></dt><dd><%= @event.event.id %></dd>
    <dt><strong><%= model_class.human_attribute_name(:name) %>:</strong></dt>
    <dd><%= @event.event.name %></dd>
    <dt><strong><%= t('events.show.description') %>:</strong></dt>
    <dd><%= raw nl2br h @event.event.description %></dd>
    <dt><strong><%= t('events.show.rooms') %>:</strong></dt>
    <dd><%= concat_rooms(@event.event) %></dd>
    <dt><strong><%= t('events.show.participant_count') %>:</strong></dt>
    <dd><%= @event.event.participant_count %></dd>
    <dt><strong><%= t('events.show.private') %>:</strong></dt>
    <dd><%= check_box_tag 'private', 'private', @event.event.is_private, disabled: :disabled %></dd>
    <dt><strong><%= model_class.human_attribute_name(:important) %>:</strong></dt>
    <dd><%= check_box_tag 'important', 'important', @event.event.is_important, disabled: :disabled %></dd>
    <dt><strong><%= t('event_occurrences.show.event_start') %>:</strong></dt>
    <% if @event.event.starts_at %>
        <dd><%= @event.event.starts_at.strftime("%d.%m.%Y - %H:%M") %></dd>
    <% end %>
    <dt><strong><%= t('event_occurrences.show.event_end') %>:</strong></dt>
    <% if  @event.event.ends_at%>
        <dd><%= @event.event.ends_at.strftime("%d.%m.%Y - %H:%M") %></dd>
    <% end %>
    <dt><strong><%= t('events.show.user') %>:</strong></dt>
    <dd><%= @user %></dd>
    <dt><strong><%= t('events.show.created_at') %>:</strong></dt>
    <dd><%= @event.event.created_at.strftime("%d.%m.%Y %T") %></dd>
    <dt><strong><%= t('events.show.updated_at') %>:</strong></dt>
    <dd><%= @event.event.updated_at.strftime("%d.%m.%Y %T") %></dd>
    <dt><strong><%= t('events.show.status') %>:</strong></dt>
    <dd><%= @event.event.status %></dd>
    <dt><strong><%= t('events.show.schedule') %>:</strong></dt>
    <dd><%= @event.event.pretty_schedule %></dd>
    <dd>
        <% if @favorite.empty? %>
            <%= link_to t('.toogle', :default => t("helpers.links.add_favorite")),show_toggle_favorite_from_event_path(@event.event), :class => 'btn btn-xs btn-primary' %>
        <% else %>
            <%= link_to t('.toogle', :default => t("helpers.links.remove_favorite")),show_toggle_favorite_from_event_path(@event.event), :class => 'btn btn-xs btn-danger' %>
        <% end %>
    </dd>
</dl>

<h4><%= t '.tasks' %></h4>
<% @event_id = @event.event.id %>
<%= render(partial: '/tasks/tasks_box', locals: { tasks: @tasks })%>

<%= link_to t('.back', :default => t("helpers.links.back")), @return_url.nil? ? root_path : @return_url, :class => 'btn btn-default'  %>
<% if can? :edit, @event.event %>
    <%= link_to t('.edit', :default => t("helpers.links.edit")),
                edit_event_path(@event.event), :class => 'btn btn-default' %>
<% end %>
<%= link_to t('.create', :default => t("helpers.submit.create", :model => EventTemplate.model_name.human.titleize)),
            new_event_template_from_event_path(@event.event), :class => 'btn btn-default' %>
<% if can? :destroy, @event.event %>
    <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                event_path(@event.event),
                :method => 'delete',
                :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you  sure?')) },
                :class => 'btn btn-danger' %>
<% end %>
